<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Stroke Prevalence by Age and Risk Profile â€“ BRFSS 2024</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- D3.js v7 -->
    <script src="https://d3js.org/d3.v7.min.js"></script>

    <link rel="stylesheet" href="css/style.css" />
  </head>
  <body>
    <header>
      <h1>Stroke Prevalence by Age and Risk Profile â€“ BRFSS 2024</h1>
      <p class="subtitle">
        Interactive visualization with customizable risk factor analysis
      </p>
    </header>

    <main>
      <!-- Control Panel -->
      <section class="controls">
        <div class="control-group">
          <label>
            Y-axis Metric:
            <select id="metric-select">
              <option value="stroke_rate_pct" selected>
                Stroke Prevalence (%)
              </option>
              <option value="stroke_cases">Stroke Cases (Count)</option>
            </select>
          </label>
        </div>

        <div class="control-group">
          <label>
            ğŸ¨ Color Palette:
            <select id="palette-select">
              <option value="default" selected>Default</option>
              <option value="categorical">Categorical</option>
              <option value="warm">Warm</option>
              <option value="cool">Cool</option>

              <option value="vibrant">Vibrant</option>
              <option value="pastel">Pastel</option>
            </select>
          </label>
        </div>

        <button id="customize-risks-btn" class="customize-btn">
          ğŸ¯ Customize Risk Factors
        </button>
      </section>

      <!-- Risk Factor Customization Panel (Hidden by default) -->
      <section
        id="risk-customization-panel"
        class="risk-panel"
        style="display: none"
      >
        <div class="panel-header">
          <div>
            <h3>ğŸ” Explore Specific Risk Factor Combinations</h3>
            <p class="panel-subtitle">
              Select specific combinations to analyze their stroke prevalence
              across age groups
            </p>
          </div>
          <button id="close-panel-btn" class="close-btn" title="Close panel">
            âœ•
          </button>
        </div>

        <div class="panel-content">
          <!-- Single Risk Factors -->
          <div class="risk-group">
            <h4>ğŸ“ Single Risk Factors</h4>
            <div class="checkbox-grid">
              <label class="checkbox-label">
                <input
                  type="checkbox"
                  value="no_risk_factors"
                  class="risk-checkbox"
                />
                <span>No Risk Factors</span>
              </label>

              <label class="checkbox-label">
                <input
                  type="checkbox"
                  value="is_smoker"
                  class="risk-checkbox"
                />
                <span>Current Smoker</span>
              </label>
              <label class="checkbox-label">
                <input
                  type="checkbox"
                  value="has_diabetes"
                  class="risk-checkbox"
                />
                <span>Diabetes</span>
              </label>
              <label class="checkbox-label">
                <input
                  type="checkbox"
                  value="has_prediabetes"
                  class="risk-checkbox"
                />
                <span>Prediabetes</span>
              </label>
              <label class="checkbox-label">
                <input type="checkbox" value="is_obese" class="risk-checkbox" />
                <span>Obesity (BMI â‰¥30)</span>
              </label>
              <label class="checkbox-label">
                <input
                  type="checkbox"
                  value="has_heart_disease"
                  class="risk-checkbox"
                />
                <span>Heart Disease</span>
              </label>
            </div>
          </div>

          <!-- Two Risk Factor Combinations -->
          <div class="risk-group">
            <h4>ğŸ“ğŸ“ Two Risk Factor Combinations</h4>
            <div class="checkbox-grid">
              <label class="checkbox-label">
                <input
                  type="checkbox"
                  value="is_smoker,has_diabetes"
                  class="risk-checkbox"
                />
                <span>Smoker + Diabetes</span>
              </label>
              <label class="checkbox-label">
                <input
                  type="checkbox"
                  value="is_smoker,is_obese"
                  class="risk-checkbox"
                />
                <span>Smoker + Obesity</span>
              </label>
              <label class="checkbox-label">
                <input
                  type="checkbox"
                  value="is_smoker,has_heart_disease"
                  class="risk-checkbox"
                />
                <span>Smoker + Heart Disease</span>
              </label>
              <label class="checkbox-label">
                <input
                  type="checkbox"
                  value="has_diabetes,is_obese"
                  class="risk-checkbox"
                />
                <span>Diabetes + Obesity</span>
              </label>
              <label class="checkbox-label">
                <input
                  type="checkbox"
                  value="has_diabetes,has_heart_disease"
                  class="risk-checkbox"
                />
                <span>Diabetes + Heart Disease</span>
              </label>
              <label class="checkbox-label">
                <input
                  type="checkbox"
                  value="is_obese,has_heart_disease"
                  class="risk-checkbox"
                />
                <span>Obesity + Heart Disease</span>
              </label>
              <label class="checkbox-label">
                <input
                  type="checkbox"
                  value="has_prediabetes,is_obese"
                  class="risk-checkbox"
                />
                <span>Prediabetes + Obesity</span>
              </label>
              <label class="checkbox-label">
                <input
                  type="checkbox"
                  value="is_smoker,has_prediabetes"
                  class="risk-checkbox"
                />
                <span>Smoker + Prediabetes</span>
              </label>
            </div>
          </div>

          <!-- Three+ Risk Factor Combinations -->
          <div class="risk-group">
            <h4>ğŸ“ğŸ“ğŸ“ Three+ Risk Factor Combinations</h4>
            <div class="checkbox-grid">
              <label class="checkbox-label">
                <input
                  type="checkbox"
                  value="is_smoker,has_diabetes,is_obese"
                  class="risk-checkbox"
                />
                <span>Smoker + Diabetes + Obesity</span>
              </label>
              <label class="checkbox-label">
                <input
                  type="checkbox"
                  value="has_diabetes,is_obese,has_heart_disease"
                  class="risk-checkbox"
                />
                <span>Diabetes + Obesity + Heart Disease</span>
              </label>
              <label class="checkbox-label">
                <input
                  type="checkbox"
                  value="is_smoker,has_diabetes,has_heart_disease"
                  class="risk-checkbox"
                />
                <span>Smoker + Diabetes + Heart Disease</span>
              </label>
              <label class="checkbox-label">
                <input
                  type="checkbox"
                  value="is_smoker,is_obese,has_heart_disease"
                  class="risk-checkbox"
                />
                <span>Smoker + Obesity + Heart Disease</span>
              </label>
              <label class="checkbox-label">
                <input
                  type="checkbox"
                  value="has_prediabetes,is_obese,has_heart_disease"
                  class="risk-checkbox"
                />
                <span>Prediabetes + Obesity + Heart Disease</span>
              </label>
            </div>
          </div>

          <!-- Action Buttons -->
          <div class="panel-actions">
            <button id="apply-risks-btn" class="apply-btn">
              âœ“ Apply Selection
            </button>
            <button id="reset-risks-btn" class="reset-btn">
              â†º Reset to Default View
            </button>
          </div>

          <!-- Current View Info -->
          <div class="selection-info">
            <strong>ğŸ“Š Current View:</strong>
            <span id="current-view-text">Default aggregated risk profiles</span>
          </div>

          <!-- Help Text -->
          <div class="help-text">
            <p><strong>ğŸ’¡ How to use:</strong></p>
            <ul>
              <li>
                Select one or more risk factor combinations you want to analyze
              </li>
              <li>Click "Apply Selection" to update the chart</li>
              <li>
                The chart will show only your selected combinations across all
                age groups
              </li>
              <li>
                Use "Reset to Default View" to return to the standard aggregated
                view
              </li>
            </ul>
          </div>
        </div>
      </section>

      <!-- Chart Container -->
      <section id="chart-container">
        <!-- SVG injected by D3 -->
      </section>

      <!-- Information Notes -->
      <section class="notes">
        <div class="note-card">
          <h4>ğŸ“Š Data Source</h4>
          <p>
            CDC Behavioral Risk Factor Surveillance System (BRFSS), 2024
            public-use data file <br /><br />

            <strong>Note:</strong> Only 100000 data is used in this
            visualization
          </p>
        </div>

        <div class="note-card">
          <h4>ğŸ”¬ Risk Factors</h4>
          <p>
            Current smoking (_RFSMOK3), Diabetes (DIABETE4), Prediabetes
            (PREDIAB2), Obesity - BMIâ‰¥30 (_RFBMI5), Heart Disease (CVDCRHD4)
          </p>
        </div>

        <div class="note-card">
          <h4>ğŸ® Interactions</h4>
          <ul>
            <li><strong>Hover</strong> over bars to see detailed statistics</li>
            <li>
              <strong>Switch metrics</strong> between prevalence (%) and case
              counts
            </li>
            <li>
              <strong>Customize</strong> to explore specific risk factor
              combinations
            </li>
          </ul>
        </div>
      </section>
    </main>

    <footer>
      <p class="footer-note">
        Data Visualization Assignment | S M Shahriyar (12533559) | TU Wien
      </p>
    </footer>

    <script src="js/script.js"></script>
  </body>
</html>
